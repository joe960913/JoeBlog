<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Promise</title><link rel="shortcut icon" href="/images/ghost.jpg"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css"><script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script><meta name="generator" content="Hexo 4.0.0"></head><body><nav class="main-nav"><a href="/">Home</a><a href="/archives">Archives</a><a href="/about">About Me</a></nav><div class="profile"><section id="wrapper"><header id="header"><a href="/"><img class="2x" id="avatar" src="/images/ghost.jpg"></a><h1>Redamancy_13</h1><h2></h2></header></section></div><section class="post" id="wrapper"><article><header><h1>Promise</h1><h2 class="headline">Nov 18, 2019 10:08·
396 words
·
1 minutes read<span class="tags"></span></h2></header><section id="post-body"><h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><blockquote>
<p>什么是 promise ？</p>
</blockquote>
<p>就是承诺。什么是承诺？就是答应过要做到的事情。什么又是答应过要做到的事情？在人类世界里，是爱❤️，是友情🤼‍♂️，是亲情👪，是爱情💑。可是如果你没有履行承诺呢？你也许会失去一些重要的东西比如信任、依赖、机遇、金钱等等，所以，各位，不要轻易作出承诺哦，请改掉喜欢口嗨👄🔊的习惯！</p>
<p>但是 JavaScript 的 Promise 却不会，它不仅完成承诺的能力，还有告诉你它做不到的厚脸皮。</p>
<p>Promise 有三个状态：</p>
<ol>
<li>pending - 等待⌛️</li>
<li>resolved - 完成✅</li>
<li>rejected - 拒绝❌</li>
</ol>
<p>这个承诺一旦从等待变成完成或拒绝，它就像风蚀的蜡烛🕯️一般，永远不能回去，永远不能改变了😔。</p>
<pre><code class="javascript">new Promise((resolve, reject) =&gt; {
  resolve(&#39;success&#39;)
  // 无效
  reject(&#39;reject&#39;)
})</code></pre>
<p>Promise 的构造函数内部的代码是立刻执行的哦。</p>
<pre><code class="javascript">new Promise((resolve, reject) =&gt; {
  console.log(&#39;new Promise&#39;)
  resolve(&#39;success&#39;)
})
console.log(&#39;finifsh&#39;)
// new Promise -&gt; finifsh</code></pre>
<p>Promise 有一个 then 方法，它为 Promise 实现了链式调用。也就是说每次调用 then 之后返回的都是一个 Promise ，并且是一个全新的 Promise ，原因也是因为状态不可变。如果你在 then 中使用了 return ，那么 return 的值会被 Promise.resolve() 包装。</p>
<pre><code class="javascript">Promise.resolve(1)
  .then(res =&gt; {
    console.log(res) // =&gt; 1
    return 2 // 包装成 Promise.resolve(2)
  })
  .then(res =&gt; {
    console.log(res) // =&gt; 2
  })</code></pre>
<p>当然，因此解决了回调地狱的问题。回调地狱是啥？这就不解释了哈，懂的都懂，不懂别问😜。</p>
</section><nav id="post-nav"><span class="prev"><a href="/AsyncAwait/"><span class="arrow">←</span>Newer Posts</a></span><span class="next"><a href="/you-dont-know-js-1/">Older Posts<span class="arrow">→</span></a></span></nav><section><div id="disqus_thread"><noscript>'Please enable JavaScript to view the'<a href="http://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript></div></section><script>(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());</script></article></section><footer id="footer"><div id="social"><a class="symbol" href="https://github.com/joe960913" target="_blank" rel="noopener"><i class="fa fa-github"></i></a><p class="small">You still have time</p></div></footer><script>hljs.initHighlightingOnLoad();</script></body></html>